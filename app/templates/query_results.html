{% extends "base.html" %}

{% block content %}
<h2>Query Results</h2>

<div style="margin-bottom: 20px;">
    <h3>Your Question:</h3>
    <p style="font-style: italic; background-color: #f5f5f5; padding: 10px; border-radius: 5px;">
        "{{ query }}"
    </p>
</div>

<div style="margin-bottom: 30px;">
    <h3>AI Answer:</h3>
    <div style="background-color: #e8f5e8; padding: 15px; border-radius: 5px; border-left: 4px solid #4CAF50;">
        {{ answer }}
    </div>
</div>

<div style="margin-bottom: 30px;">
    <h3>Supporting Documents:</h3>
    {% for chunk in supporting_chunks %}
    <div style="margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px;">
        <h4>From: {{ chunk.chunk.file.filename }}</h4>
        <p style="font-size: 0.9em; color: #666;">
            Similarity score: {{ "%.3f"|format(chunk.distance) }}
        </p>
        <div style="background-color: #f9f9f9; padding: 10px; border-radius: 3px; margin-top: 10px;">
            {{ chunk.chunk.text }}
        </div>
    </div>
    {% endfor %}
</div>

<div style="margin-top: 30px;">
    <a href="{{ url_for('main.dashboard') }}" style="text-decoration: none;">
        <button style="padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
            Ask Another Question
        </button>
    </a>
</div>
{% endblock %}